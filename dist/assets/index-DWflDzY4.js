var c=Object.defineProperty;var u=(a,t,e)=>t in a?c(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var i=(a,t,e)=>u(a,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const d="todo-list-tasks";class h{loadTasks(){try{const t=localStorage.getItem(d);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e:(console.warn("Invalid data format in storage, returning empty array"),[])}catch(t){return console.error("Error loading tasks from storage:",t),[]}}saveTasks(t){try{const e=JSON.stringify(t);localStorage.setItem(d,e)}catch(e){console.error("Error saving tasks to storage:",e)}}}function k(a){return a.trim().length>0}function p(a){return k(a)?{id:crypto.randomUUID(),description:a.trim(),completed:!1,createdAt:Date.now()}:null}class m{constructor(t){i(this,"tasks",[]);i(this,"storage");this.storage=t,this.tasks=this.storage.loadTasks()}addTask(t){const e=p(t);return e?(this.tasks.push(e),this.storage.saveTasks(this.tasks),e):null}toggleTask(t){const e=this.tasks.find(n=>n.id===t);return e?(e.completed=!e.completed,this.storage.saveTasks(this.tasks),!0):!1}deleteTask(t){const e=this.tasks.length;return this.tasks=this.tasks.filter(n=>n.id!==t),this.tasks.length===e?!1:(this.storage.saveTasks(this.tasks),!0)}getAllTasks(){return[...this.tasks]}}class g{constructor(t){i(this,"taskManager");i(this,"taskInput");i(this,"taskList");i(this,"emptyState");i(this,"addTaskForm");this.taskManager=t,this.taskInput=document.getElementById("task-input"),this.taskList=document.getElementById("task-list"),this.emptyState=document.getElementById("empty-state"),this.addTaskForm=document.getElementById("add-task-form"),this.setupEventListeners(),this.render()}setupEventListeners(){this.addTaskForm.addEventListener("submit",t=>{t.preventDefault(),this.handleAddTask()})}handleAddTask(){const t=this.taskInput.value;this.taskManager.addTask(t)&&(this.taskInput.value="",this.taskInput.focus(),this.render())}handleToggleTask(t){this.taskManager.toggleTask(t),this.render()}handleDeleteTask(t){this.taskManager.deleteTask(t),this.render()}renderTask(t){const e=document.createElement("li");e.className=`task-item${t.completed?" completed":""}`,e.dataset.taskId=t.id;const n=document.createElement("input");n.type="checkbox",n.className="task-checkbox",n.checked=t.completed,n.addEventListener("change",()=>this.handleToggleTask(t.id));const s=document.createElement("span");s.className="task-description",s.textContent=t.description;const r=document.createElement("button");return r.className="delete-button",r.textContent="Delete",r.addEventListener("click",()=>this.handleDeleteTask(t.id)),e.appendChild(n),e.appendChild(s),e.appendChild(r),e}render(){const t=this.taskManager.getAllTasks();this.taskList.innerHTML="",t.length===0?(this.emptyState.style.display="block",this.taskList.style.display="none"):(this.emptyState.style.display="none",this.taskList.style.display="block",t.forEach(e=>{const n=this.renderTask(e);this.taskList.appendChild(n)}))}}function l(){const a=new h,t=new m(a);new g(t)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l();
